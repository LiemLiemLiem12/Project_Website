<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lý Khách hàng - SR Store</title>
    <!-- Bootstrap CSS -->
    <link href="cssBootstrap/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/Admin.css">
</head>
<body>
    <div class="admin-container">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="logo">
                <h2>SR STORE</h2>
            </div>
            <ul class="nav-links">
                <li>
                    <a href="AdminDashboard.html"><i class="fas fa-th-large"></i> Dashboard</a>
                </li>
                <li>
                    <a href="AdminProduct.html"><i class="fas fa-tshirt"></i> Sản Phẩm</a>
                </li>
                <li>
                    <a href="AdminOrder.html"><i class="fas fa-shopping-cart"></i> Đơn Hàng</a>
                </li>
                <li class="active">
                    <a href="AdminCustomer.html"><i class="fas fa-users"></i> Khách Hàng</a>
                </li>
                <li>
                    <a href="AdminCategory.html"><i class="fas fa-tags"></i> Danh Mục</a>
                </li>
                <li>
                    <a href="AdminReport.html"><i class="fas fa-chart-bar"></i> Báo Cáo</a>
                </li>
                <li>
                    <a href="AdminSetting.html"><i class="fas fa-cog"></i> Cài Đặt</a>
                </li>
            </ul>
            <div class="admin-info">
                <img src="../upload/img/avatar.jpg" alt="Admin Avatar" class="profile-image">
                <div>
                    <p class="admin-name">Admin</p>
                    <a href="#" class="logout"><i class="fas fa-sign-out-alt"></i> Đăng xuất</a>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="customer-management">
                <!-- Page Header -->
                <div class="page-header d-flex justify-content-between align-items-center">
                    <h1 class="mb-0">Quản lý Khách hàng</h1>
                    <div class="d-flex gap-2">
                        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addCustomerModal">
                            <i class="fas fa-plus"></i> Thêm khách hàng
                        </button>
                        <button class="btn btn-danger" id="deleteSelectedCustomerBtn" disabled>
                            <i class="fas fa-trash"></i> Xóa nhiều
                        </button>
                    </div>
                </div>

                <!-- Filters Section -->
                <div class="customer-filters">
                    <div class="filter-row">
                        <div class="filter-item">
                            <div class="search-box">
                                <button type="button">
                                    <i class="fas fa-search"></i>
                                </button>
                                <input type="text" placeholder="Tìm kiếm khách hàng...">
                            </div>
                        </div>
                        <div class="filter-item">
                            <select class="filter-dropdown">
                                <option value="">Trạng thái</option>
                                <option value="active">Đang hoạt động</option>
                                <option value="inactive">Không hoạt động</option>
                            </select>
                        </div>
                        <div class="filter-item">
                            <select class="filter-dropdown">
                                <option value="">Sắp xếp theo</option>
                                <option value="newest">Mới nhất</option>
                                <option value="oldest">Cũ nhất</option>
                                <option value="name-asc">Tên A-Z</option>
                                <option value="name-desc">Tên Z-A</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Customers Table -->
                <div class="customer-table">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>
                                    <input type="checkbox" id="select-all-customer">
                                </th>
                                <th>Mã KH</th>
                                <th>Họ tên</th>
                                <th>Email</th>
                                <th>Số điện thoại</th>
                                <th>Địa chỉ</th>
                                <th>Ngày tạo</th>
                                <th>Trạng thái</th>
                                <th>Thao tác</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="customer-row"
                                data-customer-id="KH001"
                                data-customer-name="Nguyễn Văn A"
                                data-customer-email="nguyenvana@email.com"
                                data-customer-phone="0901234567"
                                data-customer-address="123 Đường ABC, Quận 1, TP.HCM"
                                data-customer-created="2024-05-01"
                                data-customer-status="Đang hoạt động"
                                data-customer-total-orders="5"
                                data-customer-total-spent="2.500.000đ"
                            >
                                <td><input type="checkbox" class="customer-checkbox"></td>
                                <td>KH001</td>
                                <td>Nguyễn Văn A</td>
                                <td>nguyenvana@email.com</td>
                                <td>0901234567</td>
                                <td>123 Đường ABC, Quận 1, TP.HCM</td>
                                <td>2024-05-01</td>
                                <td><span class="status active">Đang hoạt động</span></td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-sm btn-info btn-view-customer" title="Ẩn/Hiện" data-hide="0">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="btn btn-sm btn-warning btn-edit-customer" title="Sửa">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <!-- Thêm các khách hàng khác tương tự -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="jsBootstrap/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="js/Admin.js"></script>

    <script>
        // Wait for both DOM and Bootstrap to be ready
        document.addEventListener('DOMContentLoaded', function() {
            // Get all customer rows
            const customerRows = document.querySelectorAll('tr[data-customer-id]');
            
            customerRows.forEach(function(row) {
                row.addEventListener('dblclick', function() {
                    console.log('Double click detected'); // Debug log
                    
                    // Get customer data from data-attributes
                    const customerId = row.getAttribute('data-customer-id');
                    const customerName = row.getAttribute('data-customer-name');
                    const customerEmail = row.getAttribute('data-customer-email');
                    const customerPhone = row.getAttribute('data-customer-phone');
                    const customerAddress = row.getAttribute('data-customer-address');
                    const customerCreated = row.getAttribute('data-customer-created');
                    const customerStatus = row.getAttribute('data-customer-status');
                    const customerTotalOrders = row.getAttribute('data-customer-total-orders');
                    const customerTotalSpent = row.getAttribute('data-customer-total-spent');

                    // Fill the modal with customer data
                    document.getElementById('detailCustomerId').textContent = customerId;
                    document.getElementById('detailCustomerName').textContent = customerName;
                    document.getElementById('detailCustomerEmail').textContent = customerEmail;
                    document.getElementById('detailCustomerPhone').textContent = customerPhone;
                    document.getElementById('detailCustomerAddress').textContent = customerAddress;
                    document.getElementById('detailCustomerCreated').textContent = customerCreated;
                    document.getElementById('detailCustomerStatus').textContent = customerStatus;
                    document.getElementById('detailCustomerTotalOrders').textContent = customerTotalOrders;
                    document.getElementById('detailCustomerTotalSpent').textContent = customerTotalSpent;

                    // Show the modal using Bootstrap
                    const modal = new bootstrap.Modal(document.getElementById('customerDetailModal'));
                    modal.show();
                });
            });
        });
    </script>

<!-- Customer Detail Modal -->
<div class="modal fade" id="customerDetailModal" tabindex="-1" aria-labelledby="customerDetailModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="customerDetailModalLabel">Chi tiết khách hàng</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Đóng"></button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-md-6">
            <p><strong>Mã khách hàng:</strong> <span id="detailCustomerId"></span></p>
            <p><strong>Họ tên:</strong> <span id="detailCustomerName"></span></p>
            <p><strong>Email:</strong> <span id="detailCustomerEmail"></span></p>
            <p><strong>Số điện thoại:</strong> <span id="detailCustomerPhone"></span></p>
            <p><strong>Địa chỉ:</strong> <span id="detailCustomerAddress"></span></p>
          </div>
          <div class="col-md-6">
            <p><strong>Ngày tạo:</strong> <span id="detailCustomerCreated"></span></p>
            <p><strong>Trạng thái:</strong> <span id="detailCustomerStatus"></span></p>
            <p><strong>Tổng số đơn hàng:</strong> <span id="detailCustomerTotalOrders"></span></p>
            <p><strong>Tổng chi tiêu:</strong> <span id="detailCustomerTotalSpent"></span></p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</body>
</html> 