<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RSStore - Thanh Toán Đơn Hàng</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Animation library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/Order.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top">
        <div class="container">
            <a class="navbar-brand" href="Home.html">RSSTORE</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="Home.html">Trang chủ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="AllProduct.html">Sản phẩm</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="Login.html">Tài khoản</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="Cart.html">Giỏ hàng <i class="fas fa-shopping-cart"></i></a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Header Title -->
    <div class="container mb-4">
        <div class="header-title">
            <h2>Đặt hàng</h2>
            <div class="checkout-steps">
                <div class="checkout-step">
                    <div class="step-number">1</div>
                    <span>Giỏ hàng</span>
                </div>
                <div class="checkout-step active">
                    <div class="step-number">2</div>
                    <span>Đặt hàng</span>
                </div>
                <div class="checkout-step">
                    <div class="step-number">3</div>
                    <span>Hoàn tất</span>
                </div>
            </div>
        </div>
        
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="Home.html">Trang chủ</a></li>
                <li class="breadcrumb-item"><a href="Cart.html">Giỏ hàng</a></li>
                <li class="breadcrumb-item active" aria-current="page">Đặt hàng</li>
            </ol>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="container">
        <div class="row g-4 checkout-container">
            <div class="col-md-7 order-summary">
                <h4 class="section-title">
                    <i class="bi bi-geo-alt-fill me-2"></i> Thông tin giao hàng
                </h4>
                <form id="checkout-form" novalidate>
                    <div class="row">
                        <div class="col-12 mb-3">
                            <label for="fullname" class="form-label">Họ và tên</label>
                            <input type="text" class="form-control" id="fullname" required placeholder="Nhập họ và tên người nhận hàng">
                            <div class="invalid-feedback">Vui lòng nhập họ và tên.</div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="phone" class="form-label">Số điện thoại</label>
                            <input type="tel" class="form-control" id="phone" required placeholder="Nhập số điện thoại">
                            <div class="invalid-feedback">Vui lòng nhập số điện thoại.</div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="email" placeholder="Nhập email để nhận thông tin đơn hàng">
                        </div>
                        <div class="col-12 mb-3">
                            <label for="address" class="form-label">Địa chỉ</label>
                            <input type="text" class="form-control" id="address" required placeholder="Nhập địa chỉ cụ thể (số nhà, tên đường)">
                            <div class="invalid-feedback">Vui lòng nhập địa chỉ.</div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="province" class="form-label">Tỉnh/Thành phố</label>
                                <select id="province" class="form-select" required>
                                    <option value="">Chọn tỉnh/thành</option>
                                    <option value="79">TP. Hồ Chí Minh</option>
                                    <option value="01">Hà Nội</option>
                                    <option value="48">Đà Nẵng</option>
                                    <option value="92">Cần Thơ</option>
                                    <option value="74">Bình Dương</option>
                                    <option value="75">Đồng Nai</option>
                                </select>
                                <div class="invalid-feedback">Vui lòng chọn tỉnh/thành phố.</div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="district" class="form-label">Quận/Huyện</label>
                                <select id="district" class="form-select" required>
                                    <option value="">Chọn quận/huyện</option>
                                </select>
                                <div class="invalid-feedback">Vui lòng chọn quận/huyện.</div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="ward" class="form-label">Phường/Xã</label>
                                <select id="ward" class="form-select" required>
                                    <option value="">Chọn phường/xã</option>
                                </select>
                                <div class="invalid-feedback">Vui lòng chọn phường/xã.</div>
                            </div>
                        </div>
                        
                        <div class="col-12 mb-3">
                            <label for="note" class="form-label">Ghi chú (tùy chọn)</label>
                            <textarea class="form-control" id="note" rows="2" placeholder="Thông tin bổ sung về đơn hàng hoặc giao hàng"></textarea>
                        </div>
                    </div>

                    <h4 class="section-title mt-4">
                        <i class="bi bi-truck me-2"></i> Phương thức vận chuyển
                    </h4>
                    <div class="shipping-methods mb-4">
                        <div class="shipping-method selected" data-shipping-id="ghn" data-fee="35000">
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="d-flex align-items-center">
                                    <input type="radio" class="form-check-input me-3" name="shipping" id="shipping-ghn" checked>
                                    <div>
                                        <div class="shipping-method-title">Giao hàng nhanh (GHN)</div>
                                        <div class="text-muted">Nhận hàng trong 1-3 ngày</div>
                                    </div>
                                </div>
                                <div class="shipping-fee">35,000₫</div>
                            </div>
                        </div>
                        <div class="shipping-method" data-shipping-id="ghtk" data-fee="30000">
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="d-flex align-items-center">
                                    <input type="radio" class="form-check-input me-3" name="shipping" id="shipping-ghtk">
                                    <div>
                                        <div class="shipping-method-title">Giao hàng tiết kiệm (GHTK)</div>
                                        <div class="text-muted">Nhận hàng trong 3-5 ngày</div>
                                    </div>
                                </div>
                                <div class="shipping-fee">30,000₫</div>
                            </div>
                        </div>
                    </div>

                    <h4 class="section-title">
                        <i class="bi bi-credit-card me-2"></i> Phương thức thanh toán
                    </h4>
                    <div class="payment-methods mb-4">
                        <div class="payment-method selected" data-payment-id="cod">
                            <div class="d-flex align-items-center">
                                <input type="radio" class="form-check-input me-3" name="payment" id="payment-cod" checked>
                                <img src="../upload/img/Order/COD.svg" alt="COD" class="payment-icon">
                                <div>
                                    <div class="payment-method-title">Thanh toán khi nhận hàng (COD)</div>
                                    <div class="text-muted">Thanh toán bằng tiền mặt khi nhận hàng</div>
                                </div>
                            </div>
                        </div>
                        <div class="payment-method" data-payment-id="vnpay">
                            <div class="d-flex align-items-center">
                                <input type="radio" class="form-check-input me-3" name="payment" id="payment-vnpay">
                                <img src="../upload/img/Order/VNPAY.svg" alt="VNPAY" class="payment-icon">
                                <div>
                                    <div class="payment-method-title">Thanh toán VNPay</div>
                                    <div class="text-muted">Thanh toán qua cổng VNPay</div>
                                </div>
                            </div>
                        </div>
                        <div class="payment-method" data-payment-id="momo">
                            <div class="d-flex align-items-center">
                                <input type="radio" class="form-check-input me-3" name="payment" id="payment-momo">
                                <img src="../upload/img/Order/MOMO.svg" alt="MOMO" class="payment-icon">
                                <div>
                                    <div class="payment-method-title">Thanh toán MoMo</div>
                                    <div class="text-muted">Thanh toán qua ví MoMo</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            <div class="col-md-5 order-details">
                <h4 class="section-title mb-4">
                    <i class="bi bi-bag-check-fill me-2"></i> Chi tiết đơn hàng
                </h4>
                <div class="product-list mb-4">
                    <div class="product-item animate__animated animate__fadeIn">
                        <div class="d-flex">
                            <img src="../upload/img/Home/item1.jpg" alt="Sản phẩm" class="product-image">
                            <div class="product-info">
                                <div class="product-name">Áo Thun Nam ICONDENIM Patterned</div>
                                <div class="product-variant">Màu: Đen / Size: L</div>
                                <div class="d-flex justify-content-between align-items-center">
                                    <div class="quantity-control">
                                        <button class="qty-btn minus" type="button">
                                            <i class="bi bi-dash"></i>
                                        </button>
                                        <input type="number" value="1" min="1" class="qty-input" readonly data-price="329000" data-original-price="329000">
                                        <button class="qty-btn plus" type="button">
                                            <i class="bi bi-plus"></i>
                                        </button>
                                    </div>
                                    <div class="product-price text-end" style="min-width: 110px;">329,000₫</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="product-item animate__animated animate__fadeIn" style="animation-delay: 0.1s;">
                        <div class="d-flex">
                            <img src="../upload/img/Home/item2.jpg" alt="Sản phẩm" class="product-image">
                            <div class="product-info">
                                <div class="product-name">Quần Jean Nam Slim Fit</div>
                                <div class="product-variant">Màu: Xanh / Size: 30</div>
                                <div class="d-flex justify-content-between align-items-center">
                                    <div class="quantity-control">
                                        <button class="qty-btn minus" type="button">
                                            <i class="bi bi-dash"></i>
                                        </button>
                                        <input type="number" value="1" min="1" class="qty-input" readonly data-price="449000" data-original-price="449000">
                                        <button class="qty-btn plus" type="button">
                                            <i class="bi bi-plus"></i>
                                        </button>
                                    </div>
                                    <div class="product-price text-end" style="min-width: 110px;">449,000₫</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="coupon-section mb-4">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Mã giảm giá" id="coupon-code">
                        <button class="btn btn-outline-primary" type="button" id="apply-coupon">Áp dụng</button>
                    </div>
                    <div class="mt-2 text-success d-none" id="coupon-success">
                        <i class="bi bi-check-circle-fill"></i> Mã giảm giá đã được áp dụng!
                    </div>
                    <div class="mt-2 text-danger d-none" id="coupon-error">
                        <i class="bi bi-exclamation-circle-fill"></i> Mã giảm giá không hợp lệ!
                    </div>
                </div>

                <div class="order-summary-pricing">
                    <div class="summary-item">
                        <div class="summary-label">Tạm tính</div>
                        <div class="summary-value" id="subtotal">778,000₫</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-label">Phí vận chuyển</div>
                        <div class="summary-value" id="shipping-fee">35,000₫</div>
                    </div>
                    <div class="summary-item discount-row d-none">
                        <div class="summary-label">Giảm giá</div>
                        <div class="summary-value text-success" id="discount">-100,000₫</div>
                    </div>
                    <div class="summary-divider"></div>
                    <div class="summary-item">
                        <div class="summary-label fw-bold">Tổng tiền</div>
                        <div class="summary-total" id="total">813,000₫</div>
                    </div>
                    <div class="text-end">
                        <small class="text-muted">Đã bao gồm VAT nếu có</small>
                    </div>
                </div>

                <button type="button" class="btn btn-complete-order w-100 mt-4" id="complete-order">
                    <i class="bi bi-check2-circle me-2"></i> Hoàn tất đơn hàng
                </button>
            </div>
        </div>
    </div>

    <!-- Order Success Modal -->
    <div class="modal fade" id="orderSuccessModal" tabindex="-1" aria-labelledby="orderSuccessModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body text-center p-5">
                    <div class="order-success-check">
                        <div class="check-icon">
                            <span class="icon-line line-tip"></span>
                            <span class="icon-line line-long"></span>
                            <div class="icon-circle"></div>
                            <div class="icon-fix"></div>
                        </div>
                    </div>
                    <h4 class="mb-3">Đặt hàng thành công!</h4>
                    <p>Đơn hàng #DH123456 của bạn đã được xác nhận.</p>
                    <p>Chúng tôi sẽ giao hàng cho bạn trong thời gian sớm nhất.</p>
                    <p class="mb-4">Cảm ơn bạn đã mua sắm tại RSSTORE!</p>
                    <div class="d-grid gap-2 d-md-flex justify-content-center">
                        <a href="Home.html" class="btn btn-outline-primary me-md-2">
                            <i class="bi bi-house-door-fill me-1"></i> Trang chủ
                        </a>
                        <a href="#" class="btn btn-primary">
                            <i class="bi bi-bag-check-fill me-1"></i> Theo dõi đơn hàng
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="js/Order.js"></script>
    <script>
        // Additional script to set initial state correctly
        document.addEventListener('DOMContentLoaded', function() {
            // Get all quantity inputs
            const qtyInputs = document.querySelectorAll('.qty-input');
            
            // Update each product's subtotal and total based on initial quantity values
            qtyInputs.forEach(input => {
                const productItem = input.closest('.product-item');
                const originalPrice = parseInt(input.getAttribute('data-original-price'));
                const quantity = parseInt(input.value);
                const priceElement = productItem.querySelector('.product-price');
                
                // Set initial price based on quantity
                const totalPrice = originalPrice * quantity;
                input.setAttribute('data-price', totalPrice);
                
                // Format and display price
                priceElement.textContent = new Intl.NumberFormat('vi-VN', {
                    style: 'currency',
                    currency: 'VND',
                    maximumFractionDigits: 0
                }).format(totalPrice).replace('₫', '') + '₫';
            });
            
            // Calculate initial total
            if (typeof calculateTotal === 'function') {
                calculateTotal();
            }
        });
    </script>
</body>
</html>